{"ast":null,"code":"var _jsxFileName = \"/Users/eliasboy/PycharmProjects/aiforlovefrontend/src/components/EditPreferences.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { jwtDecode } from 'jwt-decode';\nimport './EditPreferences.css';\nimport config from './config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction EditPreferences() {\n  _s();\n  const [preferences, setPreferences] = useState({\n    preferred_gender: '',\n    preferred_age_min: '',\n    preferred_age_max: '',\n    preferred_education: '',\n    preferred_smoking_habits: '',\n    preferred_drinking_habits: '',\n    preferred_diet_preferences: '',\n    preferred_hobbies: '',\n    preferred_values_and_beliefs: '',\n    preferred_life_goals: '',\n    preferred_communication_style: '',\n    preferred_family_plan: '',\n    preferred_financial_views: '',\n    preferred_conflict_resolution_style: '',\n    preferred_sexual_lifestyle: '',\n    preferred_health_and_fitness: ''\n  });\n  const [userId, setUserId] = useState(null);\n  const [message, setMessage] = useState('');\n  const navigate = useNavigate();\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      const decodedToken = jwtDecode(token);\n      if (decodedToken.sub && decodedToken.sub.user_id) {\n        setUserId(decodedToken.sub.user_id);\n      } else {\n        console.error('user_id not found in token');\n      }\n    } else {\n      console.error('No token found');\n    }\n  }, []);\n  useEffect(() => {\n    if (userId) {\n      const fetchPreferences = async () => {\n        try {\n          const token = localStorage.getItem('token');\n          const response = await axios.get(`${config.apiUrl}/get_preferences?user_id=${userId}`, {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n          setPreferences(response.data.preferences || {});\n        } catch (error) {\n          console.error('Error fetching preferences:', error.response ? error.response.data.error : error.message);\n          setMessage('Error fetching preferences');\n        }\n      };\n      fetchPreferences();\n    }\n  }, [userId]);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setPreferences(prevPreferences => ({\n      ...prevPreferences,\n      [name]: value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const token = localStorage.getItem('token');\n      const headers = {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      };\n      await axios.post(`${config.apiUrl}/update_preferences`, preferences, {\n        headers\n      });\n      setMessage('Preferences updated successfully');\n      setTimeout(() => {\n        navigate('/profile');\n      }, 2000);\n    } catch (error) {\n      console.error('Error updating preferences:', error.response ? error.response.data.error : error.message);\n      setMessage('Error updating preferences');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"edit-preferences-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Edit Preferences\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"preferences-list\",\n        children: Object.keys(preferences).map(key => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"preference-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: [key.replace(/_/g, ' '), \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: key.includes('age') ? 'number' : 'text',\n            name: key,\n            value: preferences[key] || '',\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, this)]\n        }, key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Save Preferences\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n}\n_s(EditPreferences, \"KiWLW5UbOdh2vs8HGI1kZamEGL8=\", false, function () {\n  return [useNavigate];\n});\n_c = EditPreferences;\nexport default EditPreferences;\nvar _c;\n$RefreshReg$(_c, \"EditPreferences\");","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","jwtDecode","config","jsxDEV","_jsxDEV","EditPreferences","_s","preferences","setPreferences","preferred_gender","preferred_age_min","preferred_age_max","preferred_education","preferred_smoking_habits","preferred_drinking_habits","preferred_diet_preferences","preferred_hobbies","preferred_values_and_beliefs","preferred_life_goals","preferred_communication_style","preferred_family_plan","preferred_financial_views","preferred_conflict_resolution_style","preferred_sexual_lifestyle","preferred_health_and_fitness","userId","setUserId","message","setMessage","navigate","token","localStorage","getItem","decodedToken","sub","user_id","console","error","fetchPreferences","response","get","apiUrl","headers","data","handleChange","e","name","value","target","prevPreferences","handleSubmit","preventDefault","post","setTimeout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","Object","keys","map","key","replace","type","includes","onChange","_c","$RefreshReg$"],"sources":["/Users/eliasboy/PycharmProjects/aiforlovefrontend/src/components/EditPreferences.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { jwtDecode } from 'jwt-decode';\nimport './EditPreferences.css';\nimport config from './config';\n\nfunction EditPreferences() {\n  const [preferences, setPreferences] = useState({\n    preferred_gender: '',\n    preferred_age_min: '',\n    preferred_age_max: '',\n    preferred_education: '',\n    preferred_smoking_habits: '',\n    preferred_drinking_habits: '',\n    preferred_diet_preferences: '',\n    preferred_hobbies: '',\n    preferred_values_and_beliefs: '',\n    preferred_life_goals: '',\n    preferred_communication_style: '',\n    preferred_family_plan: '',\n    preferred_financial_views: '',\n    preferred_conflict_resolution_style: '',\n    preferred_sexual_lifestyle: '',\n    preferred_health_and_fitness: ''\n  });\n  const [userId, setUserId] = useState(null);\n  const [message, setMessage] = useState('');\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      const decodedToken = jwtDecode(token);\n      if (decodedToken.sub && decodedToken.sub.user_id) {\n        setUserId(decodedToken.sub.user_id);\n      } else {\n        console.error('user_id not found in token');\n      }\n    } else {\n      console.error('No token found');\n    }\n  }, []);\n\n  useEffect(() => {\n    if (userId) {\n      const fetchPreferences = async () => {\n        try {\n          const token = localStorage.getItem('token');\n          const response = await axios.get(`${config.apiUrl}/get_preferences?user_id=${userId}`, {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n          setPreferences(response.data.preferences || {});\n        } catch (error) {\n          console.error('Error fetching preferences:', error.response ? error.response.data.error : error.message);\n          setMessage('Error fetching preferences');\n        }\n      };\n\n      fetchPreferences();\n    }\n  }, [userId]);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setPreferences((prevPreferences) => ({\n      ...prevPreferences,\n      [name]: value\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const token = localStorage.getItem('token');\n      const headers = {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      };\n      await axios.post(`${config.apiUrl}/update_preferences`, preferences, { headers });\n      setMessage('Preferences updated successfully');\n      setTimeout(() => {\n        navigate('/profile');\n      }, 2000);\n    } catch (error) {\n      console.error('Error updating preferences:', error.response ? error.response.data.error : error.message);\n      setMessage('Error updating preferences');\n    }\n  };\n\n  return (\n    <div className=\"edit-preferences-container\">\n      <h2>Edit Preferences</h2>\n      <form onSubmit={handleSubmit}>\n        <div className=\"preferences-list\">\n          {Object.keys(preferences).map((key) => (\n            <div className=\"preference-item\" key={key}>\n              <label>{key.replace(/_/g, ' ')}:</label>\n              <input\n                type={key.includes('age') ? 'number' : 'text'}\n                name={key}\n                value={preferences[key] || ''}\n                onChange={handleChange}\n              />\n            </div>\n          ))}\n        </div>\n        <button type=\"submit\">Save Preferences</button>\n      </form>\n      {message && <p>{message}</p>}\n    </div>\n  );\n}\n\nexport default EditPreferences;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,SAAS,QAAQ,YAAY;AACtC,OAAO,uBAAuB;AAC9B,OAAOC,MAAM,MAAM,UAAU;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9B,SAASC,eAAeA,CAAA,EAAG;EAAAC,EAAA;EACzB,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGX,QAAQ,CAAC;IAC7CY,gBAAgB,EAAE,EAAE;IACpBC,iBAAiB,EAAE,EAAE;IACrBC,iBAAiB,EAAE,EAAE;IACrBC,mBAAmB,EAAE,EAAE;IACvBC,wBAAwB,EAAE,EAAE;IAC5BC,yBAAyB,EAAE,EAAE;IAC7BC,0BAA0B,EAAE,EAAE;IAC9BC,iBAAiB,EAAE,EAAE;IACrBC,4BAA4B,EAAE,EAAE;IAChCC,oBAAoB,EAAE,EAAE;IACxBC,6BAA6B,EAAE,EAAE;IACjCC,qBAAqB,EAAE,EAAE;IACzBC,yBAAyB,EAAE,EAAE;IAC7BC,mCAAmC,EAAE,EAAE;IACvCC,0BAA0B,EAAE,EAAE;IAC9BC,4BAA4B,EAAE;EAChC,CAAC,CAAC;EACF,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAG7B,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAAC8B,OAAO,EAAEC,UAAU,CAAC,GAAG/B,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAMgC,QAAQ,GAAG7B,WAAW,CAAC,CAAC;EAE9BF,SAAS,CAAC,MAAM;IACd,MAAMgC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAIF,KAAK,EAAE;MACT,MAAMG,YAAY,GAAGhC,SAAS,CAAC6B,KAAK,CAAC;MACrC,IAAIG,YAAY,CAACC,GAAG,IAAID,YAAY,CAACC,GAAG,CAACC,OAAO,EAAE;QAChDT,SAAS,CAACO,YAAY,CAACC,GAAG,CAACC,OAAO,CAAC;MACrC,CAAC,MAAM;QACLC,OAAO,CAACC,KAAK,CAAC,4BAA4B,CAAC;MAC7C;IACF,CAAC,MAAM;MACLD,OAAO,CAACC,KAAK,CAAC,gBAAgB,CAAC;IACjC;EACF,CAAC,EAAE,EAAE,CAAC;EAENvC,SAAS,CAAC,MAAM;IACd,IAAI2B,MAAM,EAAE;MACV,MAAMa,gBAAgB,GAAG,MAAAA,CAAA,KAAY;QACnC,IAAI;UACF,MAAMR,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;UAC3C,MAAMO,QAAQ,GAAG,MAAMxC,KAAK,CAACyC,GAAG,CAAC,GAAGtC,MAAM,CAACuC,MAAM,4BAA4BhB,MAAM,EAAE,EAAE;YACrFiB,OAAO,EAAE;cACP,eAAe,EAAE,UAAUZ,KAAK;YAClC;UACF,CAAC,CAAC;UACFtB,cAAc,CAAC+B,QAAQ,CAACI,IAAI,CAACpC,WAAW,IAAI,CAAC,CAAC,CAAC;QACjD,CAAC,CAAC,OAAO8B,KAAK,EAAE;UACdD,OAAO,CAACC,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAACE,QAAQ,GAAGF,KAAK,CAACE,QAAQ,CAACI,IAAI,CAACN,KAAK,GAAGA,KAAK,CAACV,OAAO,CAAC;UACxGC,UAAU,CAAC,4BAA4B,CAAC;QAC1C;MACF,CAAC;MAEDU,gBAAgB,CAAC,CAAC;IACpB;EACF,CAAC,EAAE,CAACb,MAAM,CAAC,CAAC;EAEZ,MAAMmB,YAAY,GAAIC,CAAC,IAAK;IAC1B,MAAM;MAAEC,IAAI;MAAEC;IAAM,CAAC,GAAGF,CAAC,CAACG,MAAM;IAChCxC,cAAc,CAAEyC,eAAe,KAAM;MACnC,GAAGA,eAAe;MAClB,CAACH,IAAI,GAAGC;IACV,CAAC,CAAC,CAAC;EACL,CAAC;EAED,MAAMG,YAAY,GAAG,MAAOL,CAAC,IAAK;IAChCA,CAAC,CAACM,cAAc,CAAC,CAAC;IAClB,IAAI;MACF,MAAMrB,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,MAAMU,OAAO,GAAG;QACd,eAAe,EAAE,UAAUZ,KAAK,EAAE;QAClC,cAAc,EAAE;MAClB,CAAC;MACD,MAAM/B,KAAK,CAACqD,IAAI,CAAC,GAAGlD,MAAM,CAACuC,MAAM,qBAAqB,EAAElC,WAAW,EAAE;QAAEmC;MAAQ,CAAC,CAAC;MACjFd,UAAU,CAAC,kCAAkC,CAAC;MAC9CyB,UAAU,CAAC,MAAM;QACfxB,QAAQ,CAAC,UAAU,CAAC;MACtB,CAAC,EAAE,IAAI,CAAC;IACV,CAAC,CAAC,OAAOQ,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAACE,QAAQ,GAAGF,KAAK,CAACE,QAAQ,CAACI,IAAI,CAACN,KAAK,GAAGA,KAAK,CAACV,OAAO,CAAC;MACxGC,UAAU,CAAC,4BAA4B,CAAC;IAC1C;EACF,CAAC;EAED,oBACExB,OAAA;IAAKkD,SAAS,EAAC,4BAA4B;IAAAC,QAAA,gBACzCnD,OAAA;MAAAmD,QAAA,EAAI;IAAgB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACzBvD,OAAA;MAAMwD,QAAQ,EAAEV,YAAa;MAAAK,QAAA,gBAC3BnD,OAAA;QAAKkD,SAAS,EAAC,kBAAkB;QAAAC,QAAA,EAC9BM,MAAM,CAACC,IAAI,CAACvD,WAAW,CAAC,CAACwD,GAAG,CAAEC,GAAG,iBAChC5D,OAAA;UAAKkD,SAAS,EAAC,iBAAiB;UAAAC,QAAA,gBAC9BnD,OAAA;YAAAmD,QAAA,GAAQS,GAAG,CAACC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,EAAC,GAAC;UAAA;YAAAT,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACxCvD,OAAA;YACE8D,IAAI,EAAEF,GAAG,CAACG,QAAQ,CAAC,KAAK,CAAC,GAAG,QAAQ,GAAG,MAAO;YAC9CrB,IAAI,EAAEkB,GAAI;YACVjB,KAAK,EAAExC,WAAW,CAACyD,GAAG,CAAC,IAAI,EAAG;YAC9BI,QAAQ,EAAExB;UAAa;YAAAY,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACxB,CAAC;QAAA,GAPkCK,GAAG;UAAAR,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAQpC,CACN;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,eACNvD,OAAA;QAAQ8D,IAAI,EAAC,QAAQ;QAAAX,QAAA,EAAC;MAAgB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC3C,CAAC,EACNhC,OAAO,iBAAIvB,OAAA;MAAAmD,QAAA,EAAI5B;IAAO;MAAA6B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACzB,CAAC;AAEV;AAACrD,EAAA,CA3GQD,eAAe;EAAA,QAqBLL,WAAW;AAAA;AAAAqE,EAAA,GArBrBhE,eAAe;AA6GxB,eAAeA,eAAe;AAAC,IAAAgE,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}