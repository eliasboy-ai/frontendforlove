{"ast":null,"code":"var _jsxFileName = \"/Users/eliasboy/PycharmProjects/aiforlovefrontend/src/components/TrainAi.js\",\n  _s = $RefreshSig$();\n// src/components/TrainAI.js\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { jwtDecode } from 'jwt-decode';\nimport './TrainAi.css';\nimport config from './config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction TrainAI() {\n  _s();\n  const [questions, setQuestions] = useState([]);\n  const [currentQuestion, setCurrentQuestion] = useState('');\n  const [response, setResponse] = useState('');\n  const [userId, setUserId] = useState(null);\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(true);\n  const [message, setMessage] = useState('');\n  const [loadingNextQuestion, setLoadingNextQuestion] = useState(false);\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      try {\n        const decodedToken = jwtDecode(token);\n        console.log('Decoded Token:', decodedToken);\n        if (decodedToken.sub && decodedToken.sub.user_id) {\n          setUserId(decodedToken.sub.user_id);\n          console.log('Decoded user ID:', decodedToken.sub.user_id);\n        } else {\n          console.error('user_id not found in token');\n        }\n      } catch (error) {\n        console.error('Error decoding token:', error);\n      }\n    } else {\n      console.error('No token found');\n    }\n  }, []);\n  useEffect(() => {\n    if (userId) {\n      const fetchQuestions = async () => {\n        try {\n          const token = localStorage.getItem('token');\n          const response = await axios.post(`${config.apiUrl}/generate_questions`, {\n            user_id: userId\n          }, {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n          console.log('Fetched questions data:', response.data);\n          setQuestions(response.data.questions);\n          if (response.data.questions.length > 0) {\n            setCurrentQuestion(response.data.questions[0]);\n          }\n        } catch (error) {\n          console.error('Error fetching questions:', error);\n        } finally {\n          setLoading(false);\n        }\n      };\n      fetchQuestions();\n    } else {\n      console.log('User ID not set');\n      setLoading(false);\n    }\n  }, [userId]);\n  if (loading || loadingNextQuestion) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading questions...this can take a minute ._.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 12\n    }, this);\n  }\n  const handleResponseSubmit = async e => {\n    e.preventDefault();\n    try {\n      const token = localStorage.getItem('token');\n      await axios.post(`${config.apiUrl}/save_ai_response`, {\n        question: currentQuestion,\n        response: response\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      setMessage('Response saved successfully');\n      setLoadingNextQuestion(true);\n      setResponse(''); // Clear the response field\n\n      // Nach dem Absenden der Antwort eine neue Frage generieren\n      const fetchQuestion = async () => {\n        try {\n          const token = localStorage.getItem('token');\n          const response = await axios.post(`${config.apiUrl}/generate_questions`, {}, {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n          console.log('Fetched question:', response.data);\n          if (response.data.questions.length > 0) {\n            setCurrentQuestion(response.data.questions[0]);\n          } else {\n            setCurrentQuestion('No question generated. Please try again later.');\n          }\n          setMessage(''); // Clear the message after loading new question\n        } catch (error) {\n          console.error('Error fetching question:', error);\n        } finally {\n          setLoadingNextQuestion(false);\n        }\n      };\n      fetchQuestion();\n    } catch (error) {\n      console.error('Error saving response:', error);\n      setMessage('Error saving response. Please try again.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"train-ai-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Train Your AI\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), currentQuestion ? /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleResponseSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"question\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: currentQuestion\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: response,\n        onChange: e => setResponse(e.target.value),\n        placeholder: \"Type your answer here...\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading questions...this can take a minute ._.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n}\n_s(TrainAI, \"yFKAJsh/QZNax4KOBnXKmQtt4ZM=\", false, function () {\n  return [useNavigate];\n});\n_c = TrainAI;\nexport default TrainAI;\nvar _c;\n$RefreshReg$(_c, \"TrainAI\");","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","jwtDecode","config","jsxDEV","_jsxDEV","TrainAI","_s","questions","setQuestions","currentQuestion","setCurrentQuestion","response","setResponse","userId","setUserId","navigate","loading","setLoading","message","setMessage","loadingNextQuestion","setLoadingNextQuestion","token","localStorage","getItem","decodedToken","console","log","sub","user_id","error","fetchQuestions","post","apiUrl","headers","data","length","children","fileName","_jsxFileName","lineNumber","columnNumber","handleResponseSubmit","e","preventDefault","question","fetchQuestion","className","onSubmit","value","onChange","target","placeholder","required","type","_c","$RefreshReg$"],"sources":["/Users/eliasboy/PycharmProjects/aiforlovefrontend/src/components/TrainAi.js"],"sourcesContent":["// src/components/TrainAI.js\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { jwtDecode } from 'jwt-decode';\nimport './TrainAi.css';\nimport config from './config';\n\nfunction TrainAI() {\n  const [questions, setQuestions] = useState([]);\n  const [currentQuestion, setCurrentQuestion] = useState('');\n  const [response, setResponse] = useState('');\n  const [userId, setUserId] = useState(null);\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(true);\n  const [message, setMessage] = useState('');\n  const [loadingNextQuestion, setLoadingNextQuestion] = useState(false);\n\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      try {\n        const decodedToken = jwtDecode(token);\n        console.log('Decoded Token:', decodedToken);\n        if (decodedToken.sub && decodedToken.sub.user_id) {\n          setUserId(decodedToken.sub.user_id);\n          console.log('Decoded user ID:', decodedToken.sub.user_id);\n        } else {\n          console.error('user_id not found in token');\n        }\n      } catch (error) {\n        console.error('Error decoding token:', error);\n      }\n    } else {\n      console.error('No token found');\n    }\n  }, []);\n\n  useEffect(() => {\n    if (userId) {\n      const fetchQuestions = async () => {\n        try {\n          const token = localStorage.getItem('token');\n          const response = await axios.post(`${config.apiUrl}/generate_questions`, { user_id: userId }, {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n          console.log('Fetched questions data:', response.data);\n          setQuestions(response.data.questions);\n          if (response.data.questions.length > 0) {\n            setCurrentQuestion(response.data.questions[0]);\n          }\n        } catch (error) {\n          console.error('Error fetching questions:', error);\n        } finally {\n          setLoading(false);\n        }\n      };\n\n      fetchQuestions();\n    } else {\n      console.log('User ID not set');\n      setLoading(false);\n    }\n  }, [userId]);\n\n  if (loading || loadingNextQuestion) {\n    return <div>Loading questions...this can take a minute ._.</div>;\n  }\n\n  const handleResponseSubmit = async (e) => {\n      e.preventDefault();\n      try {\n          const token = localStorage.getItem('token');\n          await axios.post(`${config.apiUrl}/save_ai_response`, {\n              question: currentQuestion,\n              response: response\n          }, {\n              headers: {\n                  'Authorization': `Bearer ${token}`\n              }\n          });\n\n          setMessage('Response saved successfully');\n          setLoadingNextQuestion(true);\n          setResponse(''); // Clear the response field\n\n          // Nach dem Absenden der Antwort eine neue Frage generieren\n          const fetchQuestion = async () => {\n              try {\n                  const token = localStorage.getItem('token');\n                  const response = await axios.post(`${config.apiUrl}/generate_questions`, {}, {\n                      headers: {\n                          'Authorization': `Bearer ${token}`\n                      }\n                  });\n                  console.log('Fetched question:', response.data);\n                  if (response.data.questions.length > 0) {\n                      setCurrentQuestion(response.data.questions[0]);\n                  } else {\n                      setCurrentQuestion('No question generated. Please try again later.');\n                  }\n                  setMessage(''); // Clear the message after loading new question\n              } catch (error) {\n                  console.error('Error fetching question:', error);\n              } finally {\n                  setLoadingNextQuestion(false);\n              }\n          };\n\n          fetchQuestion();\n      } catch (error) {\n          console.error('Error saving response:', error);\n          setMessage('Error saving response. Please try again.');\n      }\n  };\n\n\n  return (\n    <div className=\"train-ai-container\">\n      <h2>Train Your AI</h2>\n      {currentQuestion ? (\n        <form onSubmit={handleResponseSubmit}>\n          <div className=\"question\">\n            <p>{currentQuestion}</p>\n          </div>\n          <textarea\n            value={response}\n            onChange={(e) => setResponse(e.target.value)}\n            placeholder=\"Type your answer here...\"\n            required\n          />\n          <button type=\"submit\">Submit</button>\n        </form>\n      ) : (\n        <p>Loading questions...this can take a minute ._.</p>\n      )}\n    </div>\n  );\n}\n\nexport default TrainAI;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}